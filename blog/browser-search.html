<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta name=description content="Wink packages’ small footprint and high performance make them a perfect candidate to use directly in the browser. In this post we’ll try to build a search functionality for our static site."> <meta http-equiv=content-language content=en> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name=theme-color content="#6C307D"> <meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible> <title>On Browser Search using Wink : winkJS — NLP, Machine Learning & Stats in Node.js</title> <link href="/stylesheets/bootstrap.min.css" rel=stylesheet /><link href="/stylesheets/master.css" rel=stylesheet /><link href="/stylesheets/atom-one-dark.css" rel=stylesheet /> <script src="/javascripts/all.js"></script> <link rel=icon type="image/png" href="favicon.png"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-47082559-2"></script> <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-47082559-2');
    </script> <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel=stylesheet> <script src="https://use.typekit.net/cwc1qce.js"></script> <script>try{Typekit.load({ async: true });}catch(e){}</script> </head> <body class="blog blog_browser-search"> <header> <nav class="navbar navbar-inverse navbar-fixed-top"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target="#main-nav" aria-expanded=false> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a href="/" title=wink class=navbar-brand> 32 </a> <h1 class=screen-reader-text>Wink JS - NLP, Machine Learning & Stats</h1> </div> <ul class="nav navbar-nav navbar-right collapse navbar-collapse" id=main-nav> <li><a href="/wink-composer" class="">Wink Composer</a></li> <li><a href="/wink-nlp/getting-started.html" class="">Wink NLP</a></li> <li><a href="/examples.html" class="">Examples</a></li> <li><a href="/blog.html" class="">Blog</a></li> <li><a href="http://github.com/winkjs">Github</a></li> <li><a href="/about.html" class="">About</a></li> </ul> </div> </nav> </header> <div class="container blog"> <article class="col-md-8 col-md-offset-2"> <h2 class=blog-h1>On Browser Search using Wink</h2> <small> May 23, 2019 by <a href="https://twitter.com/prtksxna">Prateek</a> </small> <main> <p>Wink packages with a small footprint and high performance makes them a perfect candidate to use directly in the browser. In this post we’ll try to build a search functionality for our static site. You can view the demo <a href="https://winkjs.org/showcase-bm25-text-search/">here</a> and check out the code on <a href="https://github.com/winkjs/showcase-bm25-text-search/">Github</a>.</p> <p><a href="https://winkjs.org/showcase-bm25-text-search/"><img src="/images/search-blog.png"/></a></p> <p>We’ll be using the bm25-text-search package for the search functionality and that will be our only dependency:</p> <pre><code class="bash">npm install  wink-bm25-text-search --save</code></pre> <p>Next, we’ll setup <a href="http://browserify.org/">Browserify</a> and <a href="https://gruntjs.com/">Grunt</a> to bundle our JavaScript into a single file. This will also allow us to <code>require</code> modules as we normally would in Node JS.</p> <pre><code class="bash">npm install browserify --save-dev
npm install grunt --save-dev
npm install grunt-browserify --save-dev
npm install grunt-contrib-watch --save-dev</code></pre> <p>Browserify can be run independently without Grunt, but we’ll use Grunt to watch for any changes and run Browserify automatically. This is what our <code>Gruntfile.js</code> is going to look like:</p> <pre><code class="javascript">module.exports = function(grunt) {
  grunt.loadNpmTasks('grunt-browserify');
  grunt.loadNpmTasks('grunt-contrib-watch');

  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    browserify: {
      'bundle.js': 'search.js'
    },
    watch: {
      files: ['search.js'],
      tasks: ['browserify']
    }
  });

  grunt.registerTask('default', ['watch']);
};</code></pre> <p>Before starting development we'll always run <code>grunt</code>. This will take <code>search.js</code>, look at all its dependencies, and put them all together to give us <code>bundle.js</code>. This is the only file we'll need to include in our HTML.</p> <p>For <code>search.js</code> let's start by <code>require</code>-ing the modules we need:</p> <pre><code class="javascript">var bm25 = require( 'wink-bm25-text-search' );
var nlp = require( 'wink-nlp-utils' );
var docs = require( 'wink-bm25-text-search/sample-data/demo-data-for-wink-bm25.json' );
var getSpottedTerms = require('wink-bm25-text-search/runkit/get-spotted-terms.js');</code></pre> <p>Next, we’ll use the basic configuration as documented in the <a href="https://github.com/winkjs/wink-bm25-text-search#wink-bm25-text-search">README</a> and load the documents to be searched into it. You can take a look at the JSON we’re loading <a href="https://github.com/winkjs/wink-bm25-text-search/blob/master/sample-data/demo-data-for-wink-bm25.json">here</a>.</p> <pre><code class="javascript">var engine = bm25();
var pipe = [
  nlp.string.lowerCase,
  nlp.string.tokenize0,
  nlp.tokens.removeWords,
  nlp.tokens.stem,
  nlp.tokens.propagateNegations
];
engine.defineConfig( { fldWeights: { title: 1, body: 2 } } );
engine.definePrepTasks( pipe );
docs.forEach( function ( doc, i ) {
  engine.addDoc( doc, i );
} );
engine.consolidate();</code></pre> <p>And that’s it! We are now ready to use the <code>engine</code> anywhere in our code to run the search. In our demo’s case we are getting an input from the user to search:</p> <pre><code class="javascript">var results = engine.search(el.target.value);</code></pre> <p>You can see the rest of the glue code in <a href="https://github.com/winkjs/showcase-bm25-text-search/blob/master/search.js#L37"><code>search.js</code></a> that just displays the UI and the results on the page.</p> <p>With Wink running in the browser there are endless possibilities for tools that can run with no latency. I am excited to see what you'll build with.</p> <hr> </main> <meta name="twitter:card" content=summary_large_image /> <meta name="twitter:site" content="@winkjs_org"/> <meta name="twitter:creator" content="@prtksxna"/> <meta property="og:url" content="https://winkjs.org/blog/2019-05-23-browser-search.html"/> <meta property="og:title" content="On Browser Search using Wink"/> <meta property="og:description" content="Wink packages’ small footprint and high performance make them a perfect candidate to use directly in the browser. In this post we’ll try to build a search functionality for our static site."/> <meta property="og:image" content="https://winkjs.org/images/search-blog.png"/> <meta property="og:type" content=article /> </article> <div class="col-md-4 col-md-offset-2"> <h2>Packages</h2> <br> <dt> <a href="https://github.com/winkjs/wink-bm25-text-search#wink-bm25-text-search"> bm25 text search </a> </dt> <dd> Fast Full Text Search based on BM25. </dd> <br> <dt> <a href="https://winkjs.org/wink-nlp-utils/"> nlp utils </a> </dt> <dd> NLP Functions for amplifying negations, managing elisions, creating ngrams, stems, phonetic codes to tokens and more. </dd> <br><br><br> </div> <div class=col-md-4> <h2>Recent posts</h2> <h4> <a href="/blog/browser-search.html">On Browser Search using Wink</a> </h4> <h4> <a href="/blog/naive-bayes-gets-sentimental.html">Naive Bayes gets Sentimental</a> </h4> <h4> <a href="/blog/sentimental-ai.html">Sentimental AI</a> </h4> <h4> <a href="/blog/nlp-in-agriculture.html">NLP in Agriculture</a> </h4> <br><br><br> </div> </div> <div class=signup id=signup> <div class=container> <div class="col-md-8 msg"> <h2>Sign up for updates</h2> <p>Get occasional updates from our team about new releases, guides and showcases.</p> <div id=mc_embed_signup> <form action="https://winkjs.us12.list-manage.com/subscribe/post?u=d3c950efd6a89418263b00990&amp;id=8fa8c3e2a7" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll> <div class=mc-field-group> <input type=email value="" name=EMAIL class="required email" id=mce-EMAIL placeholder="your@email.com"> </div> <div id=mce-responses class=clear> <div class=response id=mce-error-response style="display:none"></div> <div class=response id=mce-success-response style="display:none"></div> </div> <div style="position: absolute; left: -5000px;" aria-hidden=true><input name=b_d3c950efd6a89418263b00990_8fa8c3e2a7 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></div> </div> </form> </div> </div> <div class=col-md-4> <h2>Get in touch</h2> <p>We provide consulting, education, and mentoring services. Get in touch at <a href="mailto:contactus@graype.in">contactus@graype.in</a>.</p> <br><br> <a class=github-button href="https://github.com/winkjs" data-size=large aria-label="Follow @winkjs on GitHub">Visit @winkjs</a> &nbsp;&nbsp; <a href="https://twitter.com/winkjs_org?ref_src=twsrc%5Etfw" class=twitter-follow-button data-size=large data-dnt=true data-show-count=false>Follow @winkjs_org</a><script async src="https://platform.twitter.com/widgets.js" charset=utf-8></script> <script async defer src="https://buttons.github.io/buttons.js"></script> </div> </div> </div> <footer> <div class=container> <div class=row> <div class=col-md-6> <p> &copy; <a href="http://graype.in">graype systems</a> pvt. ltd. </p> </div> <div class="col-md-6 social-icons"> <ul> <li> <a href="https://twitter.com/winkjs_org/"> <img src="/images/twitter.svg" alt=twitter class=twitter> </a> </li> <li> <a href="https://github.com/winkjs"> <img src="/images/github.svg" alt=github class=github> </a> </li> <li> <a href="/packages.html"> <img src="/images/package.svg" alt=package class=package> </a> </li> </ul> </div> </div> </div> </footer> <script src="/javascripts/highlight.pack.js"></script> <script src="/javascripts/jquery.min.js"></script> <script src="/javascripts/bootstrap.min.js"></script> <script>hljs.initHighlightingOnLoad();</script> <script src="/javascripts/viz.js"></script> <script src="/javascripts/particles.min.js"></script> <script src="/javascripts/headroom.js"></script> <script>
  var myElement = document.querySelector(".navbar");
  var headroom  = new Headroom(myElement, {
    "offset": 205,
    "tolerance": 5,
  });
  headroom.init();
</script> </body> </html>